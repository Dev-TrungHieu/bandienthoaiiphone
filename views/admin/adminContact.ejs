<% include header_admin %>
<div class="content">
    <div class="row">
        <div class="col-12 pd-3">
            <h4 style="color: #333; padding-top: 5px;"><i style="color: rgb(44, 49, 46);" class="fa fa-users"
                    aria-hidden="true"></i> Quản lý người dùng</h4>
            <div class="table">
                <table class="table table-dark">
                    <thead>
                        <tr>
                            <th style="width: 5%;" scope="col">#</th>
                            <th style="width: 7%;" scope="col">Tên user</th>
                            <th style="width: 17%;" scope="col">Họ và tên</th>
                            <th scope="col">Số điện thoại</th>
                            <th scope="col">Địa chỉ</th>
                            <th style="width: 10%" scope="col">Email</th>
                            <th style="width: 11%" scope="col">Đơn đã mua</th>
                            <th style="width: 5%" scope="col">Sửa</th>
                            <th style="width: 5%" scope="col">Xóa</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% users.forEach( function(i, index) { %>

                        <tr>
                            <th scope="row"><%= index + 1 %></th>
                            <td><%= i.username %></td>
                            <td><%= i.fullname %></td>
                            <td><%= i.phone %></td>
                            <td><%= i.address %></td>
                            <td><%= i.email %></td>
                            <td><a target="_blank" class="btn btn-warning" href="/admin/viewUser/<%= i._id %>">Xem các
                                    đơn</a></td>
                            <td>
                                <button type="button" class="btn btn-primary" data-toggle="modal"
                                    data-target="#fix<%= i._id %>">
                                    Sửa
                            </td>
                            <td>
                                <button type="button" class="btn btn-danger" data-toggle="modal"
                                    data-target="#del<%= i._id %>">
                                    Xóa
                                </button>
                            </td>
                        </tr>

                        <div class="modal fade" id="fix<%= i._id %>" tabindex="-1" role="dialog"
                            aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" style="color: black;" id="exampleModalLongTitle">Cập
                                            nhập thông tin
                                        </h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>

                                    <form action="/admin/updateUser" method="POST">
                                        <div class="modal-body">
                                            <div class="form-group">
                                                <input id="my-input" class="form-control" type="text" name="_id"
                                                    value="<%= i._id %>" required="required" hidden>
                                                <input id="my-input" class="form-control" type="text" name="password"
                                                    value="<%= i.password %>" required="required" hidden>
                                                <input id="my-input" class="form-control" type="text" name="username"
                                                    value="<%= i.username %>" required="required" hidden>
                                                <label style="color: rgb(44, 49, 46);" for="my-input">Name*</label>
                                                <input id="my-input" class="form-control" type="text" name="name"
                                                    value="<%= i.name %>" required="required" disabled>
                                                <label style="color: rgb(44, 49, 46);" for="my-input1">Fullname*</label>
                                                <input id="my-input1" class="form-control" type="text" name="fullname"
                                                    value="<%= i.fullname %>" required="required">
                                                <label style="color: rgb(44, 49, 46);" for="my-input2">Address*</label>
                                                <input id="my-input2" class="form-control" type="text" name="address"
                                                    value="<%= i.address %>" required="required">
                                                <label style="color: rgb(44, 49, 46);" for="my-input3">Email*</label
                                                    style="color: rgb(44, 49, 46);">
                                                <input id="my-input3" class="form-control" type="text" name="email"
                                                    value="<%= i.email %>" required="required">
                                                <label style="color: rgb(44, 49, 46);" for="my-input4">Phone*</label>
                                                <input id="my-input4" class="form-control" type="text" name="phone"
                                                    value="<%= i.phone %>" required="required">
                                            </div>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary"
                                                data-dismiss="modal">Close</button>
                                            <button type="submit" class="btn btn-primary">Save changes</button>
                                    </form>

                                </div>
                            </div>
                        </div>
            </div>

            <div class="modal fade" id="del<%= i._id %>" tabindex="-1" role="dialog"
                aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" style="color: red;" id="exampleModalLongTitle">Cảnh báo
                            </h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div style="color: black;" class="modal-body">
                            Bạn có chắc muốn xóa người dùng ?
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Đóng</button>
                            <div class="btn btn-primary">
                                <a style="color: white; text-decoration: none;" href="/admin/deleteUser/<%= i._id %>">Xóa</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <% }) %>
            </tbody>
            </table>
        </div>
    </div>
</div>
</div>
</div>
</div>
</header>

</body>

</html>